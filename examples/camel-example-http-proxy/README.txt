Camel HTTP Proxy Example
================

A simple example which proxies web services request calls to the internal web service 
responsible for consuming the request.  When you combine this example with the 
Camel CXF OSGi example it will give you a sense of how to go about creating your own 
proxy service.

Remarks:
- During the compilation phase, a unit test will be performed which simulates the
  multiple proxy calls to a property driven proxy service..
- The Unit Test is executable from within Eclipse without modification.
- An additional Main test class is provided to exercise the route once deployed
  in the container.

While it can run on either Apache ServiceMix 4.x or Apache Karaf 2.2.x, I recommend using
ServiceMix as it already is configured to run Camel & CXF examples without modification.


Running the Example

You will need to compile the example first:
  mvn install
  
First 
1) launch the server
servicemix(.bat)


2) If you are running Karaf, add the Camel features
features:addUrl mvn:org.apache.camel.karaf/apache-camel/2.8.0-fuse-05-03/xml/features
  

3) Deploy the example
features:addurl mvn:org.apache.camel/camel-example-http-proxy/2.8.0-fuse-05-03/xml/features
features:install camel-example-http-proxy
  

4) Verify that your service is available using the following url in the browser. 
We assume you're using Karaf's default PAX Web configuration which uses 
port 8181 for http. If you would like to use another port or https, change the configuration in 
${KARAF_HOME}/etc/org.ops4j.pax.web.cfg. The immediate extension after the hostname and port ("cxf" in
the below URL) is configured via the org.apache.cxf.osgi.cfg file (Please see 
http://team.ops4j.org/wiki//display/paxweb/Pax+Web for more information on PAX Web).
  
http://localhost:8181/cxf/camel-example-cxf-osgi/webservices/incident?wsdl

5) Either use the provided Test Client or Start SOAPUI (2.x or later)
Create a new project called camel-example-cxf-osgi
Point to the following url: http://localhost:8181/cxf/camel-example-cxf-osgi/webservices/incident?wsdl
Open the request 1 (under camel-example-cxf-osgi --> ReportIncidentBinding --> ReportIncident) and copy/paste a SOAP
message generated by the unit test, for example:
  
<xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Header />
   <soap:Body>
      <ns2:inputReportIncident xmlns:ns2="http://reportincident.example.camel.apache.org">
         <incidentId>111</incidentId>
         <incidentDate>2011-03-05</incidentDate>
         <givenName>Christian</givenName>
         <familyName>Mueller</familyName>
         <summary>Bla</summary>
         <details>Bla bla</details>
         <email>cmueller@apache.org</email>
         <phone>0049 69 1234567</phone>
      </ns2:inputReportIncident>
   </soap:Body>
</soap:Envelope>

If you hit any problems please let us know on the Camel Forums
  http://camel.apache.org/discussion-forums.html

Please help us make Apache Camel better - we appreciate any feedback you may
have.  Enjoy!

------------------------
The Camel Riders!

